% -----------------------------------------------------------------
% Document class: Article
\documentclass[ a4paper, twoside, 11pt]{article}
\usepackage{../../macros-general}
\usepackage{../../macros-article}
% Number of the handout, quiz, exam, etc.
\newcommand{\numero}{01}
\setcounter{numero}{\numero}

% -----------------------------------------------------------------
\begin{document}
\allowdisplaybreaks

\input{../../macros-espanol}

\begin{center}
\Large Modelos Estoc\'asticos (INDG-1008): Tarea \numero \\[1ex]
\small \textbf{Semestre:} 2017-2018 T\'ermino I \qquad
\textbf{Instructor:} Luis I. Reyes Castro
\end{center}
\fullskip

%\input{../../article_compromiso-honor}

\textbf{Nota:} Por favor entregue todas las funciones en Python que se le soliciten en un solo archivo de acuerdo al siguiente formato: 
\halfcut
\begin{center}
{\tt apellido1\_apellido2\_tarea\_01.py }
\end{center}
\fullskip
\halfskip

% =============================================
\begin{problem}
Suponga que usted ha sido encargado con del manejo del inventario de algunos productos no-perecederos en un supermercado que abre todos los d\'ias a sus clientes por la misma cantidad de tiempo. Para mantener una consistencia en el manejo de inventario a trav\'es de los varios productos que se venden en el supermercado, el gerente ha dispuesto que todos los inventarios se controlen mediante pol\'iticas de punto de reposici\'on. 

M\'as precisamente, al final de cada d\'ia se cuenta el inventario del producto y si este es menor o igual a $I_{rep}$ unidades se hace un pedido de reposici\'on por $Q_{rep}$ unidades al proveedor, el cual es entregado por el mismo al comienzo del siguiente d\'ia antes de la hora de apertura de la tienda; caso contrario, no se hace un pedido de reposici\'on. F\'ijese que bajo estas suposiciones el m\'aximo inventario posible es:
\[
I_{max} \, = \, I_{rep} + Q_{rep}
\]
Adicionalmente,como es de costumbre en este campo de estudio, usted hace la suposici\'on simplificatoria que las demandas del producto $D_1, \, D_2, \, \dots$ constituyen una secuencia de variables aleatorias i.i.d. con distribuci\'on Poisson con par\'ametro $\lambda$. M\'as a\'un, si para cada d\'ia $t$ denotamos a $I_t$ como el inventario a la hora de apertura de la tienda del \tavo d\'ia, a $D_t$ como la demanda del d\'ia, \ie la cantidad que se vender\'ia ese d\'ia si el inventario fuere inagotable, a $R_t$ como la cantidad repuesta entre la noche del \tavo d\'ia y la hora de apertura del \tMavo d\'ia, tenemos que:
\[
I_{t+1} \, = \, \max \{ \, 0, \, I_t - D_t \, \} + R_t \, ; \qquad
R_t \, = \, 
\begin{cases}
Q_{rep}, & \text{si } 0 \leq I_t \leq I_{rep} \, ; \\
0, & \text{caso contrario;}
\end{cases}
\]

Con todo esto en mente, para cada problema de manejo de inventario con demanda $\lambda$ y pol\'itica de punto de reposici\'on $(I_{rep},Q_{rep})$ podemos construir una Cadena de Markov en $n = I_{max} + 1$ estados. M\'as precisamente, los estados ser\'ian: Cero unidades en inventario, una unidad en inventario, dos unidades en inventario, y asi sucesivamente, hasta $I_{max}$ unidades en inventario. 

\textbf{Primera Actividad: (X Puntos)}

Escriba una funci\'on en Python que tome como entrada (1) el par\'ametro $\lambda$ de la distribuci\'on Poisson de la demanda, (2) el inventario de reposici\'on $I_{rep}$ y (3) la cantidad por reposici\'on $Q_{rep}$, y que produzca como \'unica salida la matriz de transici\'on de la cadena de Markov correspondiente como un arreglo {\tt numpy} de taman\~no $(n,n)$. Por favor defina el nombre de su funci\'on como {\tt construye\_mat\_inv}. De esta manera, por ejemplo, yo usar\'ia mi funci\'on asi:
\halfskip

\begin{center}
\begin{minipage}{0.9\textwidth}
\begin{minted}[mathescape,
               linenos,
               numbersep=5pt,
               gobble=0,
               frame=lines,
               framesep=2mm]{Python}
import numpy as np
from reyes_castro_tarea_01 import matriz_P_inventario
# Entradas:
lambda_dem = 6.9 # Parametro de la demanda
I_rep = 5 # Inventario de reposicion
Q_rep = 5 # Cantidad por reposicion
# Salida: Matriz de probabilidad de la Cadena de Markov
P = contruye_mat_inventario( lambda_dem, I_rep, Q_rep)
\end{minted}
\end{minipage}
\end{center}
\fullskip

\emph{Sugerencia:} Para hacerse la vida m\'as f\'acil a la hora de calcular probabilidades le recomiendo que utilice la funcion {\tt poisson.pmf()} de la librer\'ia {\tt scipy.stats}. \href{https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.poisson.html}{Click aqu\'i} para m\'as informaci\'on. Por ejemplo: 
\halfskip

\begin{center}
\begin{minipage}{0.9\textwidth}
\begin{minted}[mathescape,
               linenos,
               numbersep=5pt,
               gobble=0,
               frame=lines,
               framesep=2mm]{Python}
from scipy.stats import poisson
# Le asignamos a `prob' la probabilidad de que una 
# variable aleatoria Poisson con parametro mu = 4.8 
# tome el valor k = 3
prob = poisson.pmf( mu = 4.8, k = 3)
\end{minted}
\end{minipage}
\end{center}
\fullskip

\textbf{Segunda Actividad: (Y Puntos)}

Construya la matriz de transici\'on para el problema para cada uno de los siguientes casos: 
\begin{table}[htb]
\centering
\begin{tabular}{|c|c|c|c|}
\hline
\textbf{Caso}           & $\bm{\lambda}$ & $\bm{I_{rep}}$ & $\bm{Q_{rep}}$ \\ \hline
Producto A - Pol\'itica 1 & 1.6                & 3                  & 2                  \\ \hline
Producto A - Pol\'itica 2 & 1.6                & 1                  & 4                  \\ \hline
Producto B - Pol\'itica 1 & 4.1                & 2                  & 5                  \\ \hline
Producto B - Pol\'itica 2 & 4.1                & 4                  & 3                  \\ \hline
\end{tabular}
\end{table}

Por favor presente sus matrices como tablas con los decimales redondeados a tres d\'igitos.

\emph{Nota:} Usted puede llevar a cabo esta actividad a\'un sin haber realizado la primera. 

\textbf{Tercera Actividad: (Z Puntos)}

Calcule la distribuci\'on en estado estable para cada uno de los cuatro casos de la actividad anterior. Por favor presente sus resultados en dos tablas separados, una para cada producto, de tal manera que se pueda observar como la pol\'itica influye en la distribuci\'on en estado estable. 

\textbf{Cuarta Actividad: (W Puntos)}

Para comparar las pol\'iticas necesitamos una funci\'on de utilidad. Para esto consideremos cualquiera de los dos productos y supongamos que la utilidad neta por unidad es de $U$ d\'olares. 

El Producto A tiene una utilidad neta por unidad de \$1.25 y un costo de retenci\'on por unidad por d\'ia de \$0.10. Calcule la utilidad de cada una de las dos pol\'iticas propuestas y comp\'arelas. Luego repita el ejercicio suponiendo que el producto B tiene una utilidad neta por unidad de \$0.60 y un costo de retenci\'on por unidad por d\'ia de \$0.08. 

\end{problem}
\vspace{\baselineskip}

\end{document}
